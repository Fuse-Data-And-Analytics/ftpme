#!/bin/bash

echo "ğŸ” Running pre-commit tests..."

# Activate virtual environment
source .venv/bin/activate

# Run unit tests (fast feedback)
echo "ğŸ“‹ Running unit tests..."
if ! ./run_tests.sh unit; then
    echo "âŒ Unit tests failed. Commit aborted."
    exit 1
fi

# Run integration tests (moderate speed)
echo "ğŸ”— Running integration tests..."
if ! ./run_tests.sh integration; then
    echo "âŒ Integration tests failed. Commit aborted."
    exit 1
fi

# Check for obvious syntax errors
echo "ğŸ” Checking Python syntax..."
if ! python -m py_compile app.py invitation_system.py create_tenant.py; then
    echo "âŒ Syntax errors found. Commit aborted."
    exit 1
fi

echo "âœ… All pre-commit tests passed!"
exit 0 